import{u as S,_ as w}from"./TanChu-C3Biuolk.js";import{_ as x,r as o,j as L,c as _,e as v,d as N,t as B,b as t,a as m,w as C,i as V,L as F,o as f,F as T,k as b,l as z,p as A,h as D}from"./index-WWJJeb02.js";import{s as g,_ as E}from"./sy-pv6U7oWR.js";/* empty css              */import"./moment-BjLXg0w5.js";import"./request-D79iTt0s.js";const J=n=>(A("data-v-05af9774"),n=n(),D(),n),M={class:"jijiang"},P=J(()=>v("i",{class:"iconfont icon-sanjiaoxing"},null,-1)),R={__name:"jijiang",setup(n){let r=S(),l=o([]),s=o({cityId:r.cityId,pageNum:1,pageSize:10});async function p(){let i=await g(s.value);l.value=i.data.films}let a=o(!1),c=o(!1);async function h(){a.value=!0,s.value.pageNum++;let i=await g(s.value);l.value=[...l.value,...i.data.films],a.value=!1,i.data.films.length===0&&(c.value=!0)}let d=o();function y(){s.value.cityId=r.cityId,window.scrollTo(0,0),s.value.pageNum=1,c.value===!0&&(c.value=!1),p()}return L(()=>{p()}),(i,u)=>{const k=E,I=F,j=w;return f(),_("div",M,[v("span",{class:"ding",onClick:u[0]||(u[0]=(...e)=>t(d).open&&t(d).open(...e))},[N(B(t(r).city||"邯郸")+" ",1),P]),m(I,{loading:t(a),"onUpdate:loading":u[1]||(u[1]=e=>V(a)?a.value=e:a=e),finished:t(c),onLoad:h,offset:300,"finished-text":"没有更多了","immediate-check":!1},{default:C(()=>[(f(!0),_(T,null,b(t(l),e=>(f(),z(k,{n:"1",key:e.filmId,item:e},null,8,["item"]))),128))]),_:1},8,["loading","finished"]),m(j,{ref_key:"kai",ref:d,onSuccess:y},null,512)])}}},Q=x(R,[["__scopeId","data-v-05af9774"]]);export{Q as default};
