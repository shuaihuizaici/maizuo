import{_ as T}from"./a-B6TbTye6.js";import{h as N}from"./moment-BjLXg0w5.js";import{y as _,z as B,a as P,B as D,C as E,E as q,_ as F,u as L,s as R,r as f,j as U,c as d,e,b as s,d as x,t as l,n as I,i as b,F as k,k as S,o as p,p as V,h as j}from"./index-WWJJeb02.js";import{m as O,u as A,i as z}from"./request-D79iTt0s.js";let g;const M={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let W=_({},M);function Z(){({instance:g}=O({setup(){const{state:n,toggle:r}=A();return()=>P(E,D(n,{"onUpdate:show":r}),null)}}))}function G(t){return B?new Promise((n,r)=>{g||Z(),g.open(_({},W,t,{callback:m=>{(m==="confirm"?n:r)(m)}}))}):Promise.resolve(void 0)}const H=t=>G(_({showCancelButton:!0},t));let v;const J={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function K(){({instance:v}=O({setup(){const{state:t,toggle:n}=A(),r=()=>{t.images=[]};return()=>P(q,D(t,{onClosed:r,"onUpdate:show":n}),null)}}))}const Q=(t,n=0)=>{if(B)return v||K(),t=Array.isArray(t)?{images:t,startPosition:n}:t,v.open(_({},J,t)),v};let X=t=>z({method:"GET",url:"/filmInfo",params:{filmId:t}});const y=t=>(V("data-v-17217546"),t=t(),j(),t),Y={class:"dyxq"},ee=["src"],se={class:"ee"},te={class:"content"},oe=y(()=>e("b",null,"2D",-1)),le={class:"san"},ne={class:"yan"},ae=y(()=>e("p",null,"演职人员",-1)),re={class:"bx"},ie=["src"],ce={class:"ju"},ue={class:"shang"},de=y(()=>e("span",null,"剧照",-1)),pe={class:"flexStyle"},me=["src"],fe={__name:"index",setup(t){let n=L(),r=R(),m=n.params.filmId,o=f({}),C=f("");async function $(){let h=await X(m);o.value=h.data.film,C.value=o.value.director}let i=f(!1),c=f(!0);return setTimeout(()=>{C.value===""&&H({message:"该影片目前没有排期，到首页看其他电影吧"}).then(()=>{r.push("/sy")}).catch(()=>{})},600),U(()=>{$()}),(h,u)=>{var w;return p(),d("div",Y,[e("img",{src:s(o).poster,class:"tu"},null,8,ee),e("div",se,[e("img",{src:T,alt:"",onClick:u[0]||(u[0]=a=>h.$router.back())})]),e("div",te,[e("div",null,[e("span",null,[x(l(s(o).name),1),oe]),e("span",null,[x(l(s(o).grade),1),e("i",null,l(s(o).grade?"分":""),1)])]),e("p",null,l(s(o).category),1),e("p",null,l(s(N)(s(o).premiereAt*1e3).format("M月D日"))+"上映",1),e("p",null,l(s(o).nation)+"|"+l(s(o).runtime)+"分钟",1),e("p",{class:I({ellipsisA:s(c)})},l(s(o).synopsis),3)]),e("div",le,[e("span",{class:I({active:s(i)}),onClick:u[1]||(u[1]=a=>{b(i)?i.value=!s(i):i=!s(i),b(c)?c.value=!s(c):c=!s(c)})},">",2)]),e("div",ne,[ae,e("div",re,[(p(!0),d(k,null,S(s(o).actors,a=>(p(),d("div",{class:"bx_item",key:a},[e("img",{src:a.avatarAddress,alt:""},null,8,ie),e("p",null,l(a.name),1),e("p",null,l(a.role),1)]))),128))])]),e("div",ce,[e("div",ue,[de,e("span",null,"全部("+l((w=s(o).photos)==null?void 0:w.length)+")",1)]),e("div",pe,[(p(!0),d(k,null,S(s(o).photos,(a,ve)=>(p(),d("div",{class:"flexStyle_item",key:a},[e("img",{src:a,alt:"",onClick:u[2]||(u[2]=_e=>s(Q)({images:s(o).photos,closeable:!0,showIndex:!0}))},null,8,me)]))),128))])])])}}},we=F(fe,[["__scopeId","data-v-17217546"]]);export{we as default};
