import{u as S,_ as w}from"./TanChu-C3Biuolk.js";import{_ as x,r as n,j as L,c as _,e as h,d as N,t as B,b as t,a as m,w as C,i as V,L as j,o as f,F,k as T,l as b,p as A,h as D}from"./index-WWJJeb02.js";import{h as g,_ as E}from"./sy-pv6U7oWR.js";/* empty css              */import"./moment-BjLXg0w5.js";import"./request-D79iTt0s.js";const M=o=>(A("data-v-7de0d263"),o=o(),D(),o),P={class:"zhengzai"},R=M(()=>h("i",{class:"iconfont icon-sanjiaoxing"},null,-1)),U={__name:"zhengzai",setup(o){let d=S(),l=n([]),s=n({cityId:d.cityId,pageNum:1,pageSize:10});async function p(){let i=await g(s.value);l.value=i.data.films}let a=n(!1),c=n(!1);async function v(){a.value=!0,s.value.pageNum++;let i=await g(s.value);l.value=[...l.value,...i.data.films],a.value=!1,i.data.films.length===0&&(c.value=!0)}let r=n();function y(){s.value.cityId=d.cityId,window.scrollTo(0,0),s.value.pageNum=1,c.value===!0&&(c.value=!1),p()}return L(()=>{p()}),(i,u)=>{const k=E,I=j,z=w;return f(),_("div",P,[h("span",{class:"ding",onClick:u[0]||(u[0]=(...e)=>t(r).open&&t(r).open(...e))},[N(B(t(d).city||"邯郸")+" ",1),R]),m(I,{loading:t(a),"onUpdate:loading":u[1]||(u[1]=e=>V(a)?a.value=e:a=e),finished:t(c),onLoad:v,"finished-text":"没有更多了",offset:300,"immediate-check":!1},{default:C(()=>[(f(!0),_(F,null,T(t(l),e=>(f(),b(k,{n:"0",key:e.filmId,item:e},null,8,["item"]))),128))]),_:1},8,["loading","finished"]),m(z,{ref_key:"kai",ref:r,onSuccess:y},null,512)])}}},O=x(U,[["__scopeId","data-v-7de0d263"]]);export{O as default};
